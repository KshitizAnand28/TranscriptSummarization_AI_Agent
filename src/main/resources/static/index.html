<!DOCTYPE html>
<html>
<head>
  <title>Summarize Prompt</title>
</head>
<body>
<h2>Summarize from Text</h2>
<textarea id="prompt" rows="6" cols="60" placeholder="Enter your prompt here"></textarea><br>
<button onclick="summarizeText()">Summarize Text</button>

<hr>

<h2>Summarize from Audio</h2>
<input type="file" id="audioFile" accept="audio/*"><br><br>
<button onclick="summarizeAudio()">Summarize Audio File</button>

<hr>

<h2>Summarize from Text File</h2>
<input type="file" id="textFile" accept=".txt,.doc,.docx,.pdf"><br><br>
<button onclick="summarizeTextFile()">Extract and Summarize Text File</button>

<h3>Result:</h3>
<pre id="result"></pre>
<!-- Add checkboxes for Slack integration -->
<label>
  <input type="checkbox" id="postToSlack" checked>
  Post summary to Slack
</label><br><br>

<script>
  function summarizeText() {
    const prompt = document.getElementById('prompt').value;
    const postToSlack = document.getElementById('postToSlack').checked;

    fetch('/api/summarize', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        text: prompt,
        postToSlack: postToSlack
      })
    })
    .then(response => response.text())
    .then(data => {
      document.getElementById('result').textContent = data;
    })
    .catch(err => {
      document.getElementById('result').textContent = 'Error: ' + err;
    });
  }
</script>

<script>
  // Your existing functions...
  function summarizeText() {
    const prompt = document.getElementById('prompt').value;
    fetch('/api/summarize', {
      method: 'POST',
      headers: { 'Content-Type': 'text/plain' },
      body: prompt
    })
    .then(response => response.text())
    .then(data => {
      document.getElementById('result').textContent = data;
    })
    .catch(err => {
      document.getElementById('result').textContent = 'Error: ' + err;
    });
  }

  function summarizeAudio() {
    const fileInput = document.getElementById('audioFile');
    const file = fileInput.files[0];

    if (!file) {
      document.getElementById('result').textContent = 'Please select an audio file first.';
      return;
    }

    const formData = new FormData();
    formData.append('audioFile', file);

    document.getElementById('result').textContent = 'Uploading and processing...';

    fetch('/api/summarize-audio', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      document.getElementById('result').textContent = data;
    })
    .catch(err => {
      document.getElementById('result').textContent = 'Error: ' + err;
    });
  }

  // New function for text file processing
  function summarizeTextFile() {
    const fileInput = document.getElementById('textFile');
    const file = fileInput.files[0];

    if (!file) {
      document.getElementById('result').textContent = 'Please select a text file first.';
      return;
    }

    const formData = new FormData();
    formData.append('textFile', file);

    document.getElementById('result').textContent = 'Uploading and extracting text...';

    fetch('/api/extract-and-summarize', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      document.getElementById('result').textContent = data;
    })
    .catch(err => {
      document.getElementById('result').textContent = 'Error: ' + err;
    });
  }
</script>
</body>
</html>
